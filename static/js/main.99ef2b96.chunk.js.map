{"version":3,"sources":["components/shop-header.js/shop-header.js","components/shop-header.js/index.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/spiner/index.js","components/spiner/spiner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shoping-cart-table/shoping-cart-table.js","components/shoping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundary/index.js","components/error-boundary/error-boundary.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","numItems","total","className","to","href","ShopHeaderContainer","items","undefined","length","map","count","reduce","a","b","this","props","num","Component","connect","shoppingCart","cartItems","orderTotal","BookListItem","book","onAddetToCart","title","author","price","coverImage","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","bookstoreService","booksAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","funcs","comp","reduceRight","wrapped","f","Spinner","class","ErrorIndicator","BookList","books","id","BookListContainer","loading","error","bookList","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","item","idx","HomePage","CartPage","App","role","path","component","exact","ErrorBoundary","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","updateBookList","action","updateCartItems","slice","updateOrder","quantity","arr","find","itemIndex","findIndex","newItem","updateCartItem","cart","updateShopingCart","reducer","store","createStore","Bookstoreservice","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.99ef2b96.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport './shop-header.css';\r\nimport { Link } from 'react-router-dom';\r\nimport {  connect } from 'react-redux';\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to = '/'>\r\n      <div className=\"logo text-dark\" href=\"#\">ReStore</div>\r\n      </Link>\r\n      <Link to = '/cart'>\r\n      <span className=\"shopping-cart\">\r\n        <i className=\"cart-icon fa fa-shopping-cart\" />\r\n        {numItems} items (${total})\r\n      </span>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nclass ShopHeaderContainer extends  Component {\r\n\r\n  numItems = (items)=>{\r\n   \r\n    if (items.length === undefined){\r\n      return 0\r\n    }\r\n    const  arrNum = items.map(({count})=> count)\r\n   \r\n    const   num = arrNum.reduce((a,b)=> a+b,0)\r\n    \r\n    return num\r\n  }\r\n  \r\n  render(){\r\n    const {items, total} = this.props;\r\n    const num = this.numItems(items);\r\n    \r\n  \r\n    return <ShopHeader numItems = {num} total={total}/>\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = ({shoppingCart:{cartItems, orderTotal}})=>{\r\n  return {\r\n    items: cartItems,\r\n    total:orderTotal\r\n  };\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, )(ShopHeaderContainer)\r\n\r\n\r\n\r\n\r\n","import ShopHeaderContainer from \"./shop-header\";\r\n\r\nexport  default ShopHeaderContainer","import BookListItem from \"./book-list-item\";\r\n\r\nexport default  BookListItem","import React from 'react';\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({ book, onAddetToCart}) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span href=\"#\" className=\"book-title\">{title}</span>\r\n        <div className=\"book-author\">{author}</div>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button className=\"btn btn-info add-to-cart\"\r\n        onClick = {onAddetToCart}\r\n        >Add to cart\r\n        </button>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n}; ","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (<Wrapped {...props}\r\n                     bookstoreService={bookstoreService}/>);\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;","const booksLoaded = (newBooks)=> {\r\n  return {\r\n    type: 'FETCH_BOOKS_LOADED',\r\n    payload: newBooks\r\n  }\r\n}\r\n\r\nconst booksRequested = (newBooks)=> {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUESTED',\r\n  }\r\n}\r\n\r\nconst booksError = (error)=> {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error,\r\n  }\r\n}\r\n\r\nexport const booksAddedToCart = (bookId)=> {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId,\r\n  }\r\n}\r\n\r\nexport const bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  }\r\n}\r\n\r\nexport const allBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  }\r\n}\r\n\r\n\r\n\r\nconst fetchBooks=(bookstoreService,dispatch )=>()=> {\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err)=>dispatch(booksError(err)));\r\n}\r\n\r\n\r\n\r\n\r\nexport {\r\n  fetchBooks\r\n};","const compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight(\r\n    (wrapped,f) => f(wrapped),comp)\r\n  \r\n}\r\n\r\nexport default compose","import Spinner from \"./spiner\";\r\n\r\n\r\n\r\n\r\nexport default Spinner","import React from 'react'\r\nimport './spiner.css'\r\n\r\n\r\nconst Spinner  = () => {\r\n  return <div class=\"loader\">Loading...</div>\r\n}\r\n\r\nexport default  Spinner","import ErrorIndicator from \"./error-indicator\";\r\n\r\nexport default ErrorIndicator","import React from 'react'\r\nimport './error-indicator.css'\r\n\r\n\r\nconst ErrorIndicator = ()=> {\r\n   return <div>Error</div>\r\n}\r\n\r\nexport default ErrorIndicator","import React, { Component } from 'react';\r\nimport BookListItem from '../book-list-item';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, booksAddedToCart } from '../../actions';\r\nimport { compose } from '../../utils';\r\nimport Spinner from '../spiner';\r\nimport './book-list.css';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\n\r\nconst BookList = ({books, onAddetToCart})=> {\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {\r\n        books.map((book) => {\r\n          return (\r\n            <li key={book.id}>\r\n              <BookListItem book={book}\r\n                onAddetToCart = {()=> onAddetToCart(book.id) }\r\n              /></li>\r\n          )\r\n        })\r\n      }\r\n    </ul>\r\n  );\r\n}\r\n\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount() {\r\n      this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddetToCart  } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator/>\r\n    }\r\n\r\n    return <BookList books = {books}  onAddetToCart = {onAddetToCart}/>\r\n  \r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = ({ bookList:{books, loading, error} }) => {\r\n  return { books, loading, error};\r\n};\r\n\r\nconst mapDispatchToProps =(dispatch, {bookstoreService})=> {\r\n  \r\n  return {\r\n    fetchBooks: fetchBooks(bookstoreService,dispatch ),\r\n    onAddetToCart: (id)=> (dispatch(booksAddedToCart(id)))\r\n    }\r\n    \r\n  }\r\n\r\n\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);","import BookList from \"./book-list\";\r\n\r\nexport default BookList","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './shoping-cart-table.css';\r\nimport { booksAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart } from '../../actions';\r\n\r\nconst ShoppingCartTable = ({items, total, onIncrease, onDecrease, onDelete }) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\">\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\">\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\">\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n        { items.map(renderRow) }\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">\r\n        Total: ${total}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst mapStateToProps = ({shoppingCart:{cartItems, orderTotal}})=>{\r\n  return {\r\n    items: cartItems,\r\n    total:orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps =  {\r\n \r\n      onIncrease: booksAddedToCart,\r\n\r\n      onDecrease: bookRemovedFromCart,\r\n\r\n      onDelete: allBooksRemovedFromCart,\r\n\r\n}\r\n\r\nexport default  connect(mapStateToProps,mapDispatchToProps ) (ShoppingCartTable);","  \r\nimport ShoppingCartTable from './shoping-cart-table'\r\n\r\nexport default ShoppingCartTable;","import React from 'react';\r\nimport BookList from '../book-list';\r\nimport ShoppingCartTable from '../shoping-cart-table';\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;","import React from 'react';\r\n\r\nconst CartPage = () => {\r\n  return <div> CardPage </div>\r\n}\r\n\r\nexport default CartPage;","import App from \"./app\";\r\n\r\nexport default App","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport ShopHeaderContainer from '../shop-header.js';\r\nimport { HomePage, CartPage } from '../pages';\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n  \r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeaderContainer/>\r\n      <Switch>\r\n        <Route\r\n          path=\"/\"\r\n          component={HomePage}\r\n          exact />\r\n        <Route\r\n          path=\"/cart\"\r\n          component={CartPage}\r\n          />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;","import ErrorBoundary from \"./error-boundary\";\r\n\r\nexport default  ErrorBoundary","import React, { Component } from 'react'\r\nimport ErrorIndicator from '../error-indicator'\r\n\r\n\r\n\r\nexport default class ErrorBoundary extends Component {\r\n\r\n  state = {\r\n    hasError:false\r\n  }\r\n  \r\ncomponentDidCatch () {\r\n    this.setState({\r\n      hasError:true\r\n    })\r\n}\r\n  render () {\r\n     if (this.state.hasError) {\r\n       return <ErrorIndicator/>\r\n     }\r\n\r\n     return this.props.children\r\n  }\r\n}\r\n\r\n","export default class BookstoreService {\r\n\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'Production-Ready Microservices',\r\n      author: 'Susan J. Fowler',\r\n      price: 32,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\r\n    {\r\n      id: 2,\r\n      title: 'Release It!',\r\n      author: 'Michael T. Nygard',\r\n      price: 45,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'}\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n          resolve(this.data)\r\n      }, 700);\r\n    });\r\n  }\r\n}","\r\n\r\n\r\nconst updateBookList = (state, action ) => {\r\n\r\n  if (state === undefined){\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null,   \r\n    }\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUESTED':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null,\r\n      }\r\n    case 'FETCH_BOOKS_LOADED':\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n      case 'FETCH_BOOKS_ERROR':\r\n        return {\r\n          books: [],\r\n          loading: false,\r\n          error: action.payload,\r\n        };\r\n        default:\r\n        return state.bookList\r\n  }\r\n}\r\n\r\nexport default updateBookList","\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0 ) {\r\n    return  [\r\n      ...cartItems.slice(0, idx),\r\n      ...cartItems.slice(idx + 1),\r\n    ]\r\n  }\r\n\r\n  if (idx === -1) {\r\n     return [\r\n       ...cartItems, \r\n       item\r\n     ]\r\n  }\r\n\r\n  return [\r\n    ...cartItems.slice(0, idx),\r\n    item,\r\n    ...cartItems.slice(idx + 1),\r\n  ]\r\n\r\n} \r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\nconst {id = book.id, count = 0, title = book.title, total = 0} = item\r\n\r\nreturn {\r\nid,\r\ntitle,\r\ncount: count + quantity,\r\ntotal: total + quantity*book.price\r\n};\r\n}\r\n\r\n const summTotal = (arr) => {     \r\n       let arrtotal = arr.map(({total})=> total)\r\n      return arrtotal.reduce((a, b )=> a +b, 0 )\r\n }\r\n\r\n\r\nconst updateOrder = (state,bookId, quantity ) => {\r\n\r\nconst { bookList: {books}, shoppingCart: {cartItems}} = state\r\n\r\nconst book = books.find((book => book.id===bookId));\r\nconst itemIndex = cartItems.findIndex((({id})=> id === bookId))\r\nconst item = cartItems[itemIndex];\r\nconst newItem  = updateCartItem(book, item, quantity);\r\n\r\nconst cart = updateCartItems(cartItems, newItem, itemIndex);\r\n\r\n\r\nreturn {\r\n      cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n      orderTotal: summTotal(cart),\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nconst updateShopingCart = (state, action ) => {\r\n\r\nif (state === undefined){\r\n  return {\r\n    cartItems: [],\r\n    orderTotal: 0\r\n  }\r\n}\r\n \r\nswitch (action.type) {\r\n  case 'BOOK_ADDED_TO_CART':\r\n    return updateOrder(state, action.payload, 1);\r\n\r\n  case 'BOOK_REMOVED_FROM_CART':\r\n    return updateOrder(state, action.payload, -1);\r\n\r\n  case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n    const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\r\n    return updateOrder(state, action.payload, -item.count);\r\n  \r\n    default:\r\n      return state.shoppingCart\r\n} \r\n}\r\n\r\nexport default  updateShopingCart","import updateBookList from './book-list'\r\nimport updateShopingCart from './shopping-cart';\r\n\r\nconst reducer = (state , action) => {\r\n        return {\r\n          bookList: updateBookList(state,action),\r\n          shoppingCart: updateShopingCart(state,action)\r\n        }         \r\n  }\r\n\r\n\r\nexport default reducer;","import { createStore } from 'redux';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore (reducer);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux'\nimport { HashRouter as Router} from 'react-router-dom'\n\nimport App from './components/app'\nimport ErrorBoundary from './components/error-boundary'\nimport Bookstoreservice  from './services/bookstore-service'\nimport {BookstoreServiceProvider} from './components/bookstore-service-context'\nimport store from './store'\n\n\nconst bookstoreService = new Bookstoreservice();\n\n\n\nReactDOM.render(\n    <Provider store = {store}>\n      <ErrorBoundary>\n        <BookstoreServiceProvider value={bookstoreService}>\n            <Router>\n              <App/>\n            </Router>\n        </BookstoreServiceProvider>\n      </ErrorBoundary>\n    </Provider>,\n    document.getElementById('root')\n \n);\n\n\n"],"sourceRoot":""}